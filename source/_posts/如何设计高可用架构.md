---
title: 如何设计高可用架构
date: 2021-05-16 13:07:50
categories: 学习笔记
tags: [高可用, 架构]
---

> 只是记录个人的一些理解，仅作参考

#### 如何设计出高可用的服务架构

​	相信我们在面试中经常会被问到，有设计过什么样的架构来支撑公司的业务，这个架构有没有什么缺点或者美中不足的地方。

以下是我的一些总结，要想设计出一个高可用的服务架构，需要考虑以下几点：

* 首先是要保持业务的稳定性(系统的稳定性是高可用的根本目的，系统持续可用，不会无故宕机，高压下仍能正常工作)
* 支持快速定位故障(除了故障能够快速发现和定位，通过报警机制，帮助工程师快速处理问题，不影响业务)
* 支持快速恢复业务

<!-- more -->

下面是沿着这几点做的优化：

##### 把项目微服务化，对资源进行分离，并搭建主从架构(对应目标1)

根据DDD领域驱动设计对我们的项目进行划分，划分模块的上下界，根据业务可划分为核心服务和普通服务，它们之前不会相互影响，服务背后的资源，如缓存、数据库、MQ相互分离。



##### 服务的治理，动态伸缩扩容，服务的熔断和降级(对应目标3)

根据业务量，对微服务的部署架构进行动态调整；对于有故障的服务，进行降级和快速响应，避免故障扇出。



##### 建立分层监控(对应目标2)

一共可分为以下5层：

* 网络层，主要是处理带宽的问题
* 接口层，防止做机刷等
* 业务层，服务内调用超时监控
* 中间件层，主要是缓存redis，或者mq
* 系统层，主要是服务器配置等





#### 关于DDD领域设计驱动